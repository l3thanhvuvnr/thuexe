!function(a,b,c){"use strict";function d(a){return m.hasOwnProperty(a)?a:"cover"}var e=/^.*(youtu\.be\/|youtube\.com\/v\/|youtube\.com\/embed\/|youtube\.com\/watch\?v=|youtube\.com\/watch\?.*\&v=)([^#\&\?]*).*/i;a.fn.elegantbackgroundslider=function(c,d){var e=arguments;0===a(b).scrollTop()&&b.scrollTo(0,0);var f;return this.each(function(b){var g=a(this),h=g.data("elegantbackgroundslider");if(h){if("string"==typeof e[0]&&"function"==typeof h[e[0]]){var i=h[e[0]].apply(h,Array.prototype.slice.call(e,1));return i===h&&(i=void 0),void(void 0!==i&&(f=f||[],f[b]=i))}d=a.extend(h.options,d),"object"==typeof h&&"destroy"in h&&h.destroy(!0)}if(!c||c&&0===c.length){var j=g.css("background-image");j&&"none"!==j?c=[{url:g.css("backgroundImage").replace(/url\(|\)|"|'/g,"")}]:a.error("No images were supplied for elegantBackgroundSlider, or element must have a CSS-defined background image.")}h=new n(this,c,d||{}),g.data("elegantbackgroundslider",h)}),f?1===f.length?f[0]:f:this},a.elegantbackgroundslider=function(b,c){return a("body").elegantbackgroundslider(b,c).data("elegantbackgroundslider")},a.expr[":"].elegantbackgroundslider=function(b){return void 0!==a(b).data("elegantbackgroundslider")},a.fn.elegantbackgroundslider.defaults={duration:5e3,transition:"fade",transitionDuration:0,animateFirst:!0,alignX:.5,alignY:.5,paused:!1,start:0,preload:2,preloadSize:1,resolutionRefreshRate:2500,resolutionChangeRatioThreshold:.1};var f={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},itemWrapper:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"100%",height:"100%",zIndex:-999999},item:{position:"absolute",margin:0,padding:0,border:"none",width:"100%",height:"100%",maxWidth:"none"}},g=function(){var c=function(a){for(var b=1;b<a.length;b++){for(var c=a[b],d=b;a[d-1]&&parseInt(a[d-1].width,10)>parseInt(c.width,10);)a[d]=a[d-1],--d;a[d]=c}return a},d=function(a,c,d){for(var e,f,g=b.devicePixelRatio||1,h=q(),i=(r(),c>a?"portrait":a>c?"landscape":"square"),j=0,k=0;k<d.length&&(f=d[k],"string"==typeof f&&(f=d[k]={url:f}),f.pixelRatio&&"auto"!==f.pixelRatio&&parseFloat(f.pixelRatio)!==g||f.deviceOrientation&&f.deviceOrientation!==h||f.windowOrientation&&f.windowOrientation!==h||f.orientation&&f.orientation!==i||(j=k,e=a,"auto"===f.pixelRatio&&(a*=g),!(f.width>=e)));k++);return d[Math.min(k,j)]},e=function(a,b){if("string"==typeof a)a=a.replace(/{{(width|height)}}/g,b);else if(a instanceof Array)for(var c=0;c<a.length;c++)a[c].src?a[c].src=e(a[c].src,b):a[c]=e(a[c],b);return a};return function(b,f){for(var g=b.width(),h=b.height(),i=[],j=function(a,b){return"width"===b?g:"height"===b?h:a},k=0;k<f.length;k++)if(a.isArray(f[k])){f[k]=c(f[k]);var l=d(g,h,f[k]);i.push(l)}else{"string"==typeof f[k]&&(f[k]={url:f[k]});var m=a.extend({},f[k]);m.url=e(m.url,j),i.push(m)}return i}}(),h=function(a){return e.test(a.url)||a.isVideo},i=function(b,c,d,e,f){var g=[],i=function(a){for(var b=0;b<g.length;b++)if(g[b].src===a.src)return g[b];return g.push(a),a},j=function(a,b,c){"function"==typeof b&&b.call(a,c)};return function b(c,d,e,f,g){if(void 0!==c){a.isArray(c)||(c=[c]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(g=arguments[arguments.length-1]),d="function"!=typeof d&&d?d:0,e="function"==typeof e||!e||e<0?c.length:Math.min(e,c.length),f="function"!=typeof f&&f?f:1,d>=c.length&&(d=0,e=0),f<0&&(f=e),f=Math.min(f,e);var k=c.slice(d+f,e-f);if(c=c.slice(d,f),!(e=c.length))return void j(c,g,!0);for(var l,m=0,n=function(){++m===e&&(j(c,g,!k),b(k,0,0,f,g))},o=0;o<c.length;o++)h(c[o])||(l=new Image,l.src=c[o].url,l=i(l),l.complete?n():a(l).on("load error",n))}}}(),j=function(b){for(var c=[],d=0;d<b.length;d++)"string"==typeof b[d]?c.push({url:b[d]}):a.isArray(b[d])?c.push(j(b[d])):c.push(k(b[d]));return c},k=function(a,c){return(a.centeredX||a.centeredY)&&(b.console&&b.console.log&&b.console.log("jquery.elegantbackgroundslider: `centeredX`/`centeredY` is deprecated, please use `alignX`/`alignY`"),a.centeredX&&(a.alignX=.5),a.centeredY&&(a.alignY=.5)),void 0!==a.speed&&(b.console&&b.console.log&&b.console.log("jquery.elegantbackgroundslider: `speed` is deprecated, please use `transitionDuration`"),a.transitionDuration=a.speed,a.transition="fade"),void 0!==a.resolutionChangeRatioTreshold&&(b.console.log("jquery.elegantbackgroundslider: `treshold` is a typo!"),a.resolutionChangeRatioThreshold=a.resolutionChangeRatioTreshold),void 0!==a.fadeFirst&&(a.animateFirst=a.fadeFirst),void 0!==a.fade&&(a.transitionDuration=a.fade,a.transition="fade"),a.scale&&(a.scale=d(a.scale)),l(a)},l=function(a,b){return"left"===a.alignX?a.alignX=0:"center"===a.alignX?a.alignX=.5:"right"===a.alignX?a.alignX=1:(void 0!==a.alignX||b)&&(a.alignX=parseFloat(a.alignX),isNaN(a.alignX)&&(a.alignX=.5)),"top"===a.alignY?a.alignY=0:"center"===a.alignY?a.alignY=.5:"bottom"===a.alignY?a.alignY=1:(void 0!==a.alignX||b)&&(a.alignY=parseFloat(a.alignY),isNaN(a.alignY)&&(a.alignY=.5)),a},m={cover:"cover",fit:"fit","fit-smaller":"fit-smaller",fill:"fill"},n=function(c,d,e){this.options=a.extend({},a.fn.elegantbackgroundslider.defaults,e||{}),this.firstShow=!0,k(this.options,!0),this.images=j(a.isArray(d)?d:[d]),this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=c===document.body;var h=a(b);this.$container=a(c),this.$root=this.isBody?s?h:a(document):this.$container,this.originalImages=this.images,this.images=g(this.options.alwaysTestWindowResolution?h:this.$root,this.originalImages),i(this.images,this.options.start||0,this.options.preload||1);var l=this.$container.children(".elegantbackgroundslider").first();if(this.$wrap=l.length?l:a('<div class="elegantbackgroundslider"></div>').css(this.options.bypassCss?{}:f.wrap).appendTo(this.$container),!this.options.bypassCss){if(!this.isBody){var m=this.$container.css("position"),n=this.$container.css("zIndex");this.$container.css({position:"static"===m?"relative":m,zIndex:"auto"===n?0:n}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&s?"fixed":"absolute"})}this.index=this.options.start,this.show(this.index),h.on("resize.elegantbackgroundslider",a.proxy(this.resize,this)).on("orientationchange.elegantbackgroundslider",a.proxy(function(){this.isBody&&0===b.pageYOffset&&(b.scrollTo(0,1),this.resize())},this))},o=function(b){var c=b.transition||"fade";"string"==typeof c&&c.indexOf("|")>-1&&(c=c.split("|")),c instanceof Array&&(c=c[Math.round(Math.random()*(c.length-1))]);var d=b.new,e=b.old?b.old:a([]);switch(c.toString().toLowerCase()){default:case"fade":d.fadeIn({duration:b.duration,complete:b.complete,easing:b.easing||void 0});break;case"fadeinout":case"fade_in_out":var f=function(){d.fadeIn({duration:b.duration/2,complete:b.complete,easing:b.easing||void 0})};e.length?e.fadeOut({duration:b.duration/2,complete:f,easing:b.easing||void 0}):f();break;case"pushleft":case"push_left":case"pushright":case"push_right":case"pushup":case"push_up":case"pushdown":case"push_down":case"coverleft":case"cover_left":case"coverright":case"cover_right":case"coverup":case"cover_up":case"coverdown":case"cover_down":var g=c.match(/^(cover|push)_?(.*)$/),h="left"===g[2]?"right":"right"===g[2]?"left":"down"===g[2]?"top":"up"===g[2]?"bottom":"right",i={display:""},j={};if(i[h]="-100%",j[h]=0,d.css(i).animate(j,{duration:b.duration,complete:function(){d.css(h,""),b.complete.apply(this,arguments)},easing:b.easing||void 0}),"push"===g[1]&&e.length){var k={};k[h]="100%",e.animate(k,{duration:b.duration,complete:function(){e.css("display","none")},easing:b.easing||void 0})}}};n.prototype={resize:function(){try{var c=this.options.alwaysTestWindowResolution?a(b):this.$root,e=c.width(),f=c.height(),h=e/(this._lastResizeContainerWidth||0),j=f/(this._lastResizeContainerHeight||0),k=this.options.resolutionChangeRatioThreshold||0;if((e!==this._lastResizeContainerWidth||f!==this._lastResizeContainerHeight)&&(Math.abs(h-1)>=k||isNaN(h)||Math.abs(j-1)>=k||isNaN(j))&&(this._lastResizeContainerWidth=e,this._lastResizeContainerHeight=f,this.images=g(c,this.originalImages),this.options.preload&&i(this.images,(this.index+1)%this.images.length,this.options.preload),1===this.images.length&&this._currentImage.url!==this.images[0].url)){var l=this;clearTimeout(l._selectAnotherResolutionTimeout),l._selectAnotherResolutionTimeout=setTimeout(function(){l.show(0)},this.options.resolutionRefreshRate)}var m,n,o={left:0,top:0,right:"auto",bottom:"auto"},p=this.isBody?this.$root.width():this.$root.innerWidth(),q=this.isBody?b.innerHeight?b.innerHeight:this.$root.height():this.$root.innerHeight(),r=this.$itemWrapper.data("width"),s=this.$itemWrapper.data("height"),t=r/s||1,u=void 0===this._currentImage.alignX?this.options.alignX:this._currentImage.alignX,v=void 0===this._currentImage.alignY?this.options.alignY:this._currentImage.alignY,w=d(this._currentImage.scale||this.options.scale);if("fit"===w||"fit-smaller"===w){if(m=r,n=s,m>p||n>q||"fit-smaller"===w){var x=p/q;x>t?(m=Math.floor(q*t),n=q):x<t?(m=p,n=Math.floor(p/t)):(m=p,n=q)}}else"fill"===w?(m=p,n=q):(m=Math.max(q*t,p),n=Math.max(m/t,q));o.top=-(n-q)*v,o.left=-(m-p)*u,o.width=m,o.height=n,this.options.bypassCss||this.$wrap.css({width:p,height:q}).find(">.elegantbackgroundslider-item").not(".deleteable").each(function(){a(this).find("img,video,iframe").css(o)});var y=a.Event("elegantbackgroundslider.resize",{relatedTarget:this.$container[0]});this.$container.trigger(y,this)}catch(a){}return this},show:function(b,c){if(!(Math.abs(b)>this.images.length-1)){var d=this,e=d.$wrap.find(">.elegantbackgroundslider-item").addClass("deleteable"),g=d.videoWrapper,i={relatedTarget:d.$container[0]};d.$container.trigger(a.Event("elegantbackgroundslider.before",i),[d,b]),this.index=b;var j=d.images[b];clearTimeout(d._cycleTimeout),delete d.videoWrapper;var k=h(j);return k?(d.videoWrapper=new p(j),d.$item=d.videoWrapper.$video.css("pointer-events","none")):d.$item=a("<img />"),d.$itemWrapper=a('<div class="elegantbackgroundslider-item">').append(d.$item),this.options.bypassCss?d.$itemWrapper.css({display:"none"}):(d.$itemWrapper.css(f.itemWrapper),d.$item.css(f.item)),d.$item.bind(k?"canplay":"load",function(f){var h=a(this),j=h.parent(),l=j.data("options");c&&(l=a.extend({},l,c));var m=this.naturalWidth||this.videoWidth||this.width,n=this.naturalHeight||this.videoHeight||this.height;j.data("width",m).data("height",n);var p=function(a){return void 0!==l[a]?l[a]:d.options[a]},q=p("transition"),r=p("transitionEasing"),s=p("transitionDuration"),t=function(){g&&(g.stop(),g.destroy()),e.remove(),!d.paused&&d.images.length>1&&d.cycle(),d.options.bypassCss||d.isBody||d.$container.css("background-image","none"),a(["after","show"]).each(function(){d.$container.trigger(a.Event("elegantbackgroundslider."+this,i),[d,b])}),k&&d.videoWrapper.play()};d.firstShow&&!d.options.animateFirst||!s||!q?(j.show(),t()):o({new:j,old:e,transition:q,duration:s,easing:r,complete:t}),d.firstShow=!1,d.resize()}),d.$itemWrapper.appendTo(d.$wrap),d.$item.attr("alt",j.alt||""),d.$itemWrapper.data("options",j),k||d.$item.attr("src",j.url),d._currentImage=j,d}},current:function(){return this.index},next:function(){var a=Array.prototype.slice.call(arguments,0);return a.unshift(this.index<this.images.length-1?this.index+1:0),this.show.apply(this,a)},prev:function(){var a=Array.prototype.slice.call(arguments,0);return a.unshift(0===this.index?this.images.length-1:this.index-1),this.show.apply(this,a)},pause:function(){return this.paused=!0,this.videoWrapper&&this.videoWrapper.pause(),this},resume:function(){return this.paused=!1,this.videoWrapper&&this.videoWrapper.play(),this.cycle(),this},cycle:function(){if(this.images.length>1){clearTimeout(this._cycleTimeout);var b=this._currentImage&&this._currentImage.duration||this.options.duration,c=h(this._currentImage),d=function(){this.$item.off(".cycle"),this.paused||this.next()};if(c){if(!this._currentImage.loop){var e=0;this.$item.on("playing.cycle",function(){var b=a(this).data("player");clearTimeout(e),e=setTimeout(function(){b.pause(),b.$video.trigger("ended")},1e3*(b.getDuration()-b.getCurrentTime()))}).on("ended.cycle",function(){clearTimeout(e)})}this.$item.on("error.cycle initerror.cycle",a.proxy(d,this))}c&&!this._currentImage.duration?this.$item.on("ended.cycle",a.proxy(d,this)):this._cycleTimeout=setTimeout(a.proxy(d,this),b)}return this},destroy:function(c){a(b).off("resize.elegantbackgroundslider orientationchange.elegantbackgroundslider"),this.videoWrapper&&this.videoWrapper.destroy(),clearTimeout(this._cycleTimeout),c||this.$wrap.remove(),this.$container.removeData("elegantbackgroundslider")}};var p=function(){this.init.apply(this,arguments)};p.prototype.init=function(c){var d,f=this,g=function(){f.$video=d,f.video=d[0]},h="video";if(c.url instanceof Array||!e.test(c.url)||(h="youtube"),f.type=h,"youtube"===h){p.loadYoutubeAPI(),f.ytId=c.url.match(e)[2];var i="https://www.youtube.com/embed/"+f.ytId+"?rel=0&autoplay=0&showinfo=0&controls=0&modestbranding=1&cc_load_policy=0&disablekb=1&iv_load_policy=3&loop=0&enablejsapi=1&origin="+encodeURIComponent(b.location.origin);f.__ytStartMuted=!!c.mute||void 0===c.mute,d=a("<iframe />").attr({src_to_load:i}).css({border:0,margin:0,padding:0}).data("player",f),c.loop&&d.on("ended.loop",function(){f.__manuallyStopped||f.play()}),f.ytReady=!1,g(),b.YT&&b.YT.loaded?(f._initYoutube(),d.trigger("initsuccess")):a(b).one("youtube_api_load",function(){f._initYoutube(),d.trigger("initsuccess")})}else{d=a("<video>").prop("autoplay",!1).prop("controls",!1).prop("loop",!!c.loop).prop("muted",!!c.mute||void 0===c.mute).prop("preload","auto").prop("poster",c.poster||"");for(var j=c.url instanceof Array?c.url:[c.url],k=0;k<j.length;k++){var l=j[k];"string"==typeof l&&(l={src:l}),a("<source>").attr("src",l.src).attr("type",l.type||null).appendTo(d)}d[0].canPlayType&&j.length?d.trigger("initsuccess"):d.trigger("initerror"),g()}},p.prototype._initYoutube=function(){var c=this,d=b.YT;c.$video.attr("src",c.$video.attr("src_to_load")).removeAttr("src_to_load");var e=!!c.$video[0].parentNode;if(!e){var f=a("<div>").css("display","none !important").appendTo(document.body);c.$video.appendTo(f)}var g=new d.Player(c.video,{events:{onReady:function(){c.__ytStartMuted&&g.mute(),e||(c.$video[0].parentNode===f[0]&&c.$video.detach(),f.remove()),c.ytReady=!0,c._updateYoutubeSize(),c.$video.trigger("canplay")},onStateChange:function(a){switch(a.data){case d.PlayerState.PLAYING:c.$video.trigger("playing");break;case d.PlayerState.ENDED:c.$video.trigger("ended");break;case d.PlayerState.PAUSED:c.$video.trigger("pause");break;case d.PlayerState.BUFFERING:c.$video.trigger("waiting");break;case d.PlayerState.CUED:c.$video.trigger("canplay")}},onPlaybackQualityChange:function(){c._updateYoutubeSize(),c.$video.trigger("resize")},onError:function(a){c.hasError=!0,c.$video.trigger({type:"error",error:a})}}});return c.ytPlayer=g,c},p.prototype._updateYoutubeSize=function(){var a=this;switch(a.ytPlayer.getPlaybackQuality()||"medium"){case"small":a.video.videoWidth=426,a.video.videoHeight=240;break;case"medium":a.video.videoWidth=640,a.video.videoHeight=360;break;default:case"large":a.video.videoWidth=854,a.video.videoHeight=480;break;case"hd720":a.video.videoWidth=1280,a.video.videoHeight=720;break;case"hd1080":a.video.videoWidth=1920,a.video.videoHeight=1080;break;case"highres":a.video.videoWidth=2560,a.video.videoHeight=1440}return a},p.prototype.play=function(){var a=this;return a.__manuallyStopped=!1,"youtube"===a.type?a.ytReady&&(a.$video.trigger("play"),a.ytPlayer.playVideo()):a.video.play(),a},p.prototype.pause=function(){var a=this;return a.__manuallyStopped=!1,"youtube"===a.type?a.ytReady&&a.ytPlayer.pauseVideo():a.video.pause(),a},p.prototype.stop=function(){var a=this;return a.__manuallyStopped=!0,"youtube"===a.type?a.ytReady&&(a.ytPlayer.pauseVideo(),a.ytPlayer.seekTo(0)):(a.video.pause(),a.video.currentTime=0),a},p.prototype.destroy=function(){var a=this;return a.ytPlayer&&a.ytPlayer.destroy(),a.$video.remove(),a},p.prototype.getCurrentTime=function(a){var b=this;return"youtube"!==b.type?b.video.currentTime:b.ytReady?b.ytPlayer.getCurrentTime():0},p.prototype.setCurrentTime=function(a){var b=this;return"youtube"===b.type?b.ytReady&&b.ytPlayer.seekTo(a,!0):b.video.currentTime=a,b},p.prototype.getDuration=function(){var a=this;return"youtube"!==a.type?a.video.duration:a.ytReady?a.ytPlayer.getDuration():0},p.loadYoutubeAPI=function(){b.YT&&b.__yt_load_event_interval__||(b.YT||a("script[src*=www\\.youtube\\.com\\/iframe_api]").length||a('<script type="text/javascript" src="https://www.youtube.com/iframe_api">').appendTo("body"),b.__yt_load_event_interval__=setInterval(function(){b.YT&&b.YT.loaded&&(a(b).trigger("youtube_api_load"),clearTimeout(b.__yt_load_event_interval__),delete b.__yt_load_event_interval__)},50))};var q=function(){if("matchMedia"in b){if(b.matchMedia("(orientation: portrait)").matches)return"portrait";if(b.matchMedia("(orientation: landscape)").matches)return"landscape"}return screen.height>screen.width?"portrait":"landscape"},r=function(){return b.innerHeight>b.innerWidth?"portrait":b.innerWidth>b.innerHeight?"landscape":"square"},s=function(){var a=navigator.userAgent,c=navigator.platform,d=a.match(/AppleWebKit\/([0-9]+)/),e=!!d&&d[1],f=a.match(/Fennec\/([0-9]+)/),g=!!f&&f[1],h=a.match(/Opera Mobi\/([0-9]+)/),i=!!h&&h[1],j=a.match(/MSIE ([0-9]+)/),k=!!j&&j[1];return!((c.indexOf("iPhone")>-1||c.indexOf("iPad")>-1||c.indexOf("iPod")>-1)&&e&&e<534||b.operamini&&"[object OperaMini]"==={}.toString.call(b.operamini)||h&&i<7458||a.indexOf("Android")>-1&&e&&e<533||g&&g<6||"palmGetResource"in b&&e&&e<534||a.indexOf("MeeGo")>-1&&a.indexOf("NokiaBrowser/8.5.0")>-1||k&&k<=6)}();jQuery(document).ready(function(){var a=jQuery(".elegant-row-background-slider"),b=jQuery(".elegant-column-background-slider"),c=["fade","fade_in_out","push_left","push_right","push_up","push_down","cover_left","cover_right","cover_up","cover_down"];a.length&&a.each(function(){var a=jQuery(this).html(),b=jQuery(this).data("transition"),d=jQuery(this).data("image-scale"),e=jQuery(this).data("transition-delay"),f=jQuery(this).data("transition-duration");b="random"===b?c:[b],a=JSON.parse(a),jQuery(this).parents(".fusion-fullwidth").elegantbackgroundslider(a,{duration:e,transition:b,transitionDuration:f,scale:d})}),b.length&&b.each(function(){var a=jQuery(this).html(),b=jQuery(this).data("transition"),d=jQuery(this).data("image-scale"),e=jQuery(this).data("transition-delay"),f=jQuery(this).data("transition-duration");b="random"===b?c:[b],a=JSON.parse(a),jQuery(this).closest(".fusion-layout-column").elegantbackgroundslider(a,{duration:e,transition:b,transitionDuration:f,scale:d})})})}(jQuery,window);