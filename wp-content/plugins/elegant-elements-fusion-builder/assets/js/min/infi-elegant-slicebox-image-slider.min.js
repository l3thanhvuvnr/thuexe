!function(a){"use strict";var b,c,d=a.event;b=d.special.debouncedresize={setup:function(){a(this).on("resize",b.handler)},teardown:function(){a(this).off("resize",b.handler)},handler:function(a,e){var f=this,g=arguments,h=function(){a.type="debouncedresize",d.dispatch.apply(f,g)};c&&clearTimeout(c),e?h():c=setTimeout(h,b.threshold)},threshold:50};var e=a(window);a.ElegantSlicebox=function(b,c){this.$el=a(c),this._init(b)},a.ElegantSlicebox.defaults={orientation:"v",perspective:1200,cuboidsCount:5,cuboidsRandom:!1,maxCuboidsCount:5,disperseFactor:0,colorHiddenSides:"#222",sequentialFactor:150,speed:600,easing:"ease",autoplay:!1,interval:3e3,fallbackFadeSpeed:300,onBeforeChange:function(a){return!1},onAfterChange:function(a){return!1},onReady:function(){return!1},reverse:!1},a.ElegantSlicebox.prototype={_init:function(b){if(this.options=a.extend(!0,{},a.ElegantSlicebox.defaults,b),this._validate(),this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,0===this.itemsCount)return!1;this.support=!jQuery("body").hasClass("fusion-builder-live-preview"),this.current=0,this.isAnimating=!1,this.isReady=!1;var c=this;this.$el.imagesLoaded(function(){var a=c.$items.eq(c.current).css("display","block").addClass("eesb-current"),b=new Image;b.src=a.find("img").attr("src"),c.realWidth=b.width,c._setSize(),c._setStyle(),c._initEvents(),c.options.onReady(),c.isReady=!0,c.options.autoplay&&c._startSlideshow()})},_validate:function(a){this.options.cuboidsCount<0?this.options.cuboidsCount=1:this.options.cuboidsCount>15?this.options.cuboidsCount=15:this.options.cuboidsCount%2==0&&++this.options.cuboidsCount,this.options.maxCuboidsCount<0?this.options.maxCuboidsCount=1:this.options.maxCuboidsCount>15?this.options.maxCuboidsCount=15:this.options.maxCuboidsCount%2==0&&++this.options.maxCuboidsCount,this.options.disperseFactor<0&&(this.options.disperseFactor=0),"v"!==this.options.orientation&&"h"!==this.options.orientation&&"r"!==this.options.orientation&&(this.options.orientation="v")},_setSize:function(){var a=this.$items.eq(this.current).find("img");this.size={width:a.width(),height:a.height()},0!==this.size.width&&this.$items.find("img").css(this.size)},_setStyle:function(){this.$el.css({"max-width":this.realWidth})},_initEvents:function(){var a=this;e.on("debouncedresize.elegantslicebox",function(b){a._setSize()})},_startSlideshow:function(){var a=this;this.slideshow=setTimeout(function(){a._navigate("next"),a.options.autoplay&&a._startSlideshow()},this.options.interval)},_stopSlideshow:function(){this.options.autoplay&&(clearTimeout(this.slideshow),this.isPlaying=!1,this.options.autoplay=!1)},_navigate:function(a,b){if(this.isAnimating||!this.isReady||this.itemsCount<2)return!1;this.isAnimating=!0,this.prev=this.current,void 0!==b?this.current=b:"next"===a?this.current=this.current<this.itemsCount-1?this.current+1:0:"prev"===a&&(this.current=this.current>0?this.current-1:this.itemsCount-1),this.options.onBeforeChange(this.current),this.support?(this._layout(a),this._rotate()):this._fade(a)},_fade:function(b){var c=this,d=this.$items.eq(this.prev),e=d.find("img").height();this.$el.css("height",e),this.$items.css("position","absolute"),this.$items.eq(this.current).fadeIn(this.options.fallbackFadeSpeed,function(){a(this).css("display","block").addClass("eesb-current"),c.$el.css("height","auto"),c.$items.css("position","relative"),c.isAnimating=!1}),c.$items.eq(c.prev).removeClass("eesb-current").fadeOut(this.options.fallbackFadeSpeed)},_layout:function(b){var c=this.options.orientation;"r"===c&&(c=0===Math.floor(2*Math.random())?"v":"h"),this.options.cuboidsRandom&&(this.options.cuboidsCount=Math.floor(Math.random()*this.options.maxCuboidsCount+1)),this._validate();var d={width:this.size.width,height:this.size.height,perspective:this.options.perspective+"px"},e=a.extend(this.options,{size:this.size,items:this.$items,direction:b,prev:this.prev,current:this.current,o:c});this.$box=a("<div>").addClass("eesb-perspective").css(d).appendTo(this.$el),this.cuboids=[],this.$el.css("overflow","visible");for(var f=0;f<this.options.cuboidsCount;++f){var g=new a.Cuboid(e,f);this.$box.append(g.getEl()),this.cuboids.push(g)}},_rotate:function(){this.$items.eq(this.prev).removeClass("eesb-current").hide();for(var a=0;a<this.options.cuboidsCount;++a){var b=this.cuboids[a],c=this;b.rotate(function(a){if(a===c.options.cuboidsCount-1){c.$el.css("overflow","hidden"),c.isAnimating=!1,c.$box.remove();var b=c.$items.eq(c.current);b.css("display","block"),setTimeout(function(){b.addClass("eesb-current")},0),c.options.onAfterChange(c.current)}})}},_destroy:function(a){this.$el.off(".elegantslicebox").removeData("slicebox"),e.off(".elegantslicebox"),a.call()},add:function(a,b){this.$items=this.$items.add(a),this.itemsCount=this.$items.length,b&&b.call(a)},next:function(){this._stopSlideshow(),this._navigate("next")},previous:function(){this._stopSlideshow(),this._navigate("prev")},jump:function(a){if((a-=1)===this.current||a>=this.itemsCount||a<0)return!1;this._stopSlideshow(),this._navigate(a>this.current?"next":"prev",a)},play:function(){this.isPlaying||(this.isPlaying=!0,this._navigate("next"),this.options.autoplay=!0,this._startSlideshow())},pause:function(){this.isPlaying&&this._stopSlideshow()},isActive:function(){return this.isAnimating},destroy:function(a){this._destroy(a)}},a.Cuboid=function(a,b){this.config=a,this.pos=b,this.side=1,this._setSize(),this._configureStyles()},a.Cuboid.prototype={_setSize:function(){this.size={width:"v"===this.config.o?Math.floor(this.config.size.width/this.config.cuboidsCount):this.config.size.width,height:"v"===this.config.o?this.config.size.height:Math.floor(this.config.size.height/this.config.cuboidsCount)},this.extra="v"===this.config.o?this.config.size.width-this.size.width*this.config.cuboidsCount:this.config.size.height-this.size.height*this.config.cuboidsCount},_configureStyles:function(){var b=Math.ceil(this.config.cuboidsCount/2),c=this.pos<b?{zIndex:100*(this.pos+1),left:"v"===this.config.o?this.size.width*this.pos:0,top:"v"===this.config.o?0:this.size.height*this.pos}:{zIndex:100*(this.config.cuboidsCount-this.pos),left:"v"===this.config.o?this.size.width*this.pos:0,top:"v"===this.config.o?0:this.size.height*this.pos};this.disperseFactor=this.config.disperseFactor*(this.pos+1-b),this.style=a.extend({"-webkit-transition":"-webkit-transform "+this.config.speed+"ms "+this.config.easing,"-moz-transition":"-moz-transform "+this.config.speed+"ms "+this.config.easing,"-o-transition":"-o-transform "+this.config.speed+"ms "+this.config.easing,"-ms-transition":"-ms-transform "+this.config.speed+"ms "+this.config.easing,transition:"transform "+this.config.speed+"ms "+this.config.easing},c,this.size);var d=this.config.reverse?"":"-",e=this.config.reverse?"-":"";this.animationStyles={side1:"v"===this.config.o?{transform:"translate3d( 0, 0, -"+this.size.height/2+"px )"}:{transform:"translate3d( 0, 0, -"+this.size.width/2+"px )"},side2:"v"===this.config.o?{transform:"translate3d( 0, 0, -"+this.size.height/2+"px ) rotate3d( 1, 0, 0, "+d+"90deg )"}:{transform:"translate3d( 0, 0, -"+this.size.width/2+"px ) rotate3d( 0, 1, 0, "+d+"90deg )"},side3:"v"===this.config.o?{transform:"translate3d( 0, 0, -"+this.size.height/2+"px ) rotate3d( 1, 0, 0, "+d+"180deg )"}:{transform:"translate3d( 0, 0, -"+this.size.width/2+"px ) rotate3d( 0, 1, 0, "+d+"180deg )"},side4:"v"===this.config.o?{transform:"translate3d( 0, 0, -"+this.size.height/2+"px ) rotate3d( 1, 0, 0, "+e+"90deg )"}:{transform:"translate3d( 0, 0, -"+this.size.width/2+"px ) rotate3d( 0, 1, 0, "+e+"90deg )"}};var f="v"===this.config.o?this.size.height:this.size.width;this.sidesStyles={frontSideStyle:{width:"v"===this.config.o?this.size.width+this.extra:this.size.width,height:"v"===this.config.o?this.size.height:this.size.height+this.extra,backgroundColor:this.config.colorHiddenSides,transform:"rotate3d( 0, 1, 0, 0deg ) translate3d( 0, 0, "+f/2+"px )"},backSideStyle:{width:this.size.width,height:this.size.height,backgroundColor:this.config.colorHiddenSides,transform:"rotate3d( 0, 1, 0, "+e+"180deg ) translate3d( 0, 0, "+f/2+"px ) rotateZ( "+e+"180deg )"},rightSideStyle:{width:f,height:"v"===this.config.o?this.size.height:this.size.height+this.extra,left:"v"===this.config.o?this.size.width/2-this.size.height/2:0,backgroundColor:this.config.colorHiddenSides,transform:"rotate3d( 0, 1, 0, "+e+"90deg ) translate3d( 0, 0, "+this.size.width/2+"px )"},leftSideStyle:{width:f,height:"v"===this.config.o?this.size.height:this.size.height+this.extra,left:"v"===this.config.o?this.size.width/2-this.size.height/2:0,backgroundColor:this.config.colorHiddenSides,transform:"rotate3d( 0, 1, 0, "+d+"90deg ) translate3d( 0, 0, "+this.size.width/2+"px )"},topSideStyle:{width:"v"===this.config.o?this.size.width+this.extra:this.size.width,height:f,top:"v"===this.config.o?0:this.size.height/2-this.size.width/2,backgroundColor:this.config.colorHiddenSides,transform:"rotate3d( 1, 0, 0, "+e+"90deg ) translate3d( 0, 0, "+this.size.height/2+"px )"},bottomSideStyle:{width:"v"===this.config.o?this.size.width+this.extra:this.size.width,height:f,top:"v"===this.config.o?0:this.size.height/2-this.size.width/2,backgroundColor:this.config.colorHiddenSides,transform:"rotate3d( 1, 0, 0, "+d+"90deg ) translate3d( 0, 0, "+this.size.height/2+"px )"}}},getEl:function(){return this.$el=a("<div/>").css(this.style).css(this.animationStyles.side1).append(a("<div/>").addClass("eesb-side").css(this.sidesStyles.frontSideStyle)).append(a("<div/>").addClass("eesb-side").css(this.sidesStyles.backSideStyle)).append(a("<div/>").addClass("eesb-side").css(this.sidesStyles.rightSideStyle)).append(a("<div/>").addClass("eesb-side").css(this.sidesStyles.leftSideStyle)).append(a("<div/>").addClass("eesb-side").css(this.sidesStyles.topSideStyle)).append(a("<div/>").addClass("eesb-side").css(this.sidesStyles.bottomSideStyle)),this._showImage(this.config.prev),this.$el},_showImage:function(a){var b,c=this.config.items.eq(a),d={"background-size":this.config.size.width+"px "+this.config.size.height+"px"};switch(d.backgroundImage="url("+c.find("img").attr("src")+")",this.side){case 1:b=0;break;case 2:b="v"===this.config.o?4:2;break;case 3:b=1;break;case 4:b="v"===this.config.o?5:3}d.backgroundPosition="v"===this.config.o?-this.pos*this.size.width+"px 0px":"0px -"+this.pos*this.size.height+"px",this.$el.children().eq(b).css(d)},rotate:function(a){var b,c=this;setTimeout(function(){if("next"===c.config.direction)switch(c.side){case 1:b=c.animationStyles.side2,c.side=2;break;case 2:b=c.animationStyles.side3,c.side=3;break;case 3:b=c.animationStyles.side4,c.side=4;break;case 4:b=c.animationStyles.side1,c.side=1}else switch(c.side){case 1:b=c.animationStyles.side4,c.side=4;break;case 2:b=c.animationStyles.side1,c.side=1;break;case 3:b=c.animationStyles.side2,c.side=2;break;case 4:b=c.animationStyles.side3,c.side=3}c._showImage(c.config.current);var d={},e={};"v"===c.config.o?(d.left="+="+c.disperseFactor+"px",e.left="-="+c.disperseFactor+"px"):"h"===c.config.o&&(d.top="+="+c.disperseFactor+"px",e.top="-="+c.disperseFactor+"px"),c.$el.css(b).animate(d,c.config.speed/2).animate(e,c.config.speed/2,function(){a&&a.call(c,c.pos)})},this.config.sequentialFactor*this.pos+30)}};var f=function(a){window.console&&window.console.error(a)};a.fn.elegantslicebox=function(b){var c=a.data(this,"slicebox");if("string"==typeof b){var d=Array.prototype.slice.call(arguments,1);this.each(function(){return c?a.isFunction(c[b])&&"_"!==b.charAt(0)?void c[b].apply(c,d):void f("no such method '"+b+"' for slicebox self"):void f("cannot call methods on slicebox prior to initialization; attempted to call method '"+b+"'")})}else this.each(function(){c?c._init():c=a.data(this,"slicebox",new a.ElegantSlicebox(b,this))});return c},a.fn.initElegantSlicebox=function(){var a=jQuery(".elegant-slicebox-image-slider");jQuery.each(a,function(a,b){var c,d=jQuery(b).find(".elegant-slicebox-image-slider-items"),e=jQuery(b).find(".navigation-arrow-next"),f=jQuery(b).find(".navigation-arrow-prev"),g={orientation:jQuery(b).data("orientation"),cuboidsCount:jQuery(b).data("slices_count"),sequentialFactor:jQuery(b).data("rotation_interval"),speed:jQuery(b).data("speed"),autoplay:jQuery(b).data("autoplay"),interval:jQuery(b).data("autoplay_speed"),disperseFactor:jQuery(b).data("disperse_factor")};c=jQuery(d).elegantslicebox(g),e.on("click",function(){c.next()}),f.on("click",function(){c.previous()})})},jQuery(document).on("ready resize fusion-element-render-iee_slicebox_image_slider-render",function(a){jQuery(".elegant-slicebox-image-slider").initElegantSlicebox()})}(jQuery);